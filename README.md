# NestJs_Test
ä½¿ç”¨è€…æª”æ¡ˆæ¬Šé™ç³»çµ±
ğŸ“– é¡Œç›®èƒŒæ™¯ï¼šä½ æ­£åœ¨ç‚ºä¸€å€‹ä¼æ¥­å…§éƒ¨ç³»çµ±é–‹ç™¼æª”æ¡ˆç®¡ç†æ¨¡çµ„ã€‚æ¯å€‹ä½¿ç”¨è€…å¯ä»¥ä¸Šå‚³ã€ä¸‹è¼‰ã€åˆªé™¤æª”æ¡ˆï¼Œä¸¦å¯è¨­å®šç‰¹å®šä½¿ç”¨è€…æˆ–ç¾¤çµ„çš„è®€å¯«æ¬Šé™ã€‚

âœ… åŠŸèƒ½éœ€æ±‚ï¼šè«‹ä½¿ç”¨ **NestJS** å¯¦ä½œä¸€å€‹æª”æ¡ˆå­˜å– APIï¼Œä¸¦å¯¦ä½œæ¬Šé™æ§ç®¡æ©Ÿåˆ¶ï¼š
1. ä¸Šå‚³æª”æ¡ˆï¼ˆPOST /filesï¼‰
Body:
```
{ 
    "filename": "report.pdf",
    "content": "Base64EncodedFileHere"
}
```
ä½¿ç”¨è€…ä¸Šå‚³æª”æ¡ˆå¾Œï¼Œè©²ä½¿ç”¨è€…æˆç‚ºæª”æ¡ˆçš„æ“æœ‰è€…ã€‚

2. å–å¾—ä½¿ç”¨è€…å¯è¦‹çš„æª”æ¡ˆåˆ—è¡¨ï¼ˆGET /filesï¼‰
å›å‚³è©²ä½¿ç”¨è€…æœ‰ã€Œè®€å–æ¬Šé™ã€çš„æ‰€æœ‰æª”æ¡ˆã€‚

3. ä¸‹è¼‰æª”æ¡ˆï¼ˆGET /files/:idï¼‰
åƒ…ç•¶å‰ä½¿ç”¨è€…æœ‰è©²æª”æ¡ˆçš„è®€å–æ¬Šé™æ‰å¯ä¸‹è¼‰ã€‚

4. åˆªé™¤æª”æ¡ˆï¼ˆDELETE /files/:idï¼‰
åªèƒ½ç”±è©²æª”æ¡ˆçš„æ“æœ‰è€…åŸ·è¡Œåˆªé™¤ã€‚

5. è¨­å®šæª”æ¡ˆæ¬Šé™ï¼ˆPOST /files/:id/permissionsï¼‰

Body:
```
{
    "userId": 2,
    "permission": "read" // or "write"
}
```

åƒ…æª”æ¡ˆæ“æœ‰è€…å¯ä»¥è¨­å®šå…¶ä»–ä½¿ç”¨è€…çš„æ¬Šé™ã€‚


ğŸ”’ æ¬Šé™æ§åˆ¶è¦æ±‚ï¼š
- Middlewareï¼š
æª¢æŸ¥è«‹æ±‚ä¸­æ˜¯å¦å¸¶æœ‰æœ‰æ•ˆçš„ Authorization headerï¼ˆæ¨¡æ“¬é©—è­‰ï¼ŒJWT å¯çœç•¥å¯¦ä½œç´°ç¯€ï¼‰ã€‚
è§£ç¢¼ä½¿ç”¨è€… ID ä¸¦æ³¨å…¥åˆ° request.user ä¸­ã€‚
- Guardï¼š
å¯¦ä½œ PermissionsGuardï¼Œåˆ¤æ–·è©²ä½¿ç”¨è€…æ˜¯å¦å°æŒ‡å®šè³‡æºæ“æœ‰ read æˆ– write æ¬Šé™ã€‚
ä½¿ç”¨ @SetMetadata('permission', 'read') èˆ‡ Reflector ä¾†æŒ‡å®šéœ€æ±‚ã€‚
- Interceptorï¼š
å¯¦ä½œ LoggingInterceptorï¼Œè¨˜éŒ„ API è¢«å‘¼å«çš„æ™‚é–“ã€ä½¿ç”¨è€…ã€æª”æ¡ˆ ID èˆ‡æ“ä½œé¡å‹ã€‚
æ‰€æœ‰æª”æ¡ˆæ“ä½œçš†é ˆç¶“éæ­¤è¨˜éŒ„ã€‚

å‰ç«¯:
æœ‰ä¸€å€‹ç°¡å–®çš„vue3é é¢è®“æˆ‘å€‘å¯ä»¥æŸ¥è©¢ä½¿ç”¨è€…çš„æª”æ¡ˆæ¬Šé™ï¼Œä¸¦æŠŠä»¥ä¸ŠAPIåŠŸèƒ½ç¶åˆ°UIä¸Šé¢ã€‚
å•ç­”é¡Œï¼š
è«‹èªªæ˜ Middlewareã€Guardã€Interceptor åœ¨åŸ·è¡Œæµç¨‹ä¸­çš„é †åºã€‚
ä½¿ç”¨è€…æ“æœ‰è¨±å¤šæª”æ¡ˆï¼Œè‹¥è¦æŸ¥è©¢ã€Œå“ªäº›æª”æ¡ˆæˆ‘æ“æœ‰è®€æ¬Šé™ã€ï¼Œå¦‚ä½•è¨­è¨ˆ SQL æŸ¥è©¢ä¾†é¿å… N+1 å•é¡Œï¼Ÿ
åœ¨åˆ†æ•£å¼æ¶æ§‹ä¸‹ï¼Œæª”æ¡ˆæ¬Šé™å¦‚ä½•åŒæ­¥æˆ–å¿«å–æ‰èƒ½ä¿è­‰æ•ˆèƒ½èˆ‡ä¸€è‡´æ€§ï¼Ÿ

åŠ åˆ†é¡Œ :
=> åœ¨å¾Œç«¯åŠ å…¥è‡ªå‹•åŒ–æ¸¬è©¦ã€‚



## å•é¡Œçµ±æ•´ï¼š Task Lists
1. API: ä¸Šå‚³æª”æ¡ˆ
    - [POST] /files
2. API: åˆ—å‡ºæ‰€æœ‰æœ‰æ¬Šé™çš„æª”æ¡ˆ
    - [GET] /files
3. API: ä¸‹è¼‰æª”æ¡ˆ
    - [GET] /files/:id
4. API: åˆªé™¤æª”æ¡ˆ
    - [DELETE] /files/:id
5. API: è¨­å®šæª”æ¡ˆæ¬Šé™ 
    - [POST] /files/:id/permissions



## Step 1: To create a nestjs project
```
npx @nestjs/cli new
```

## Step 2: Enter to the directory created

```
npm run start:dev
```
This line of command will start a hot reload for NestJs project.

